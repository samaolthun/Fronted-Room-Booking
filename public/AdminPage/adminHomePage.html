<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./adminHomePage.css">
    <title>Admin Page</title>
    <!-- boostrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</head>
<body>
    
    <!-- Message box (move it below all buttons so it's visible) -->
    <div class="message" id="successMsg"></div>

    <div class="header">
        <div class="logo">
          <img src="https://upload.wikimedia.org/wikipedia/km/e/ee/Rupp_logo.png?20090803154844" alt="RUPP Logo">
          <div>Royal University of Phnom Penh</div>
        </div>

        <div class="nav">
          <a href="#" class="nav-item">Home</a>
          <!-- <a href="history.html" class="nav-item active">History</a> -->
          <a href="setting.html" class="nav-item">Setting</a>
          <a href="about-us.html" class="nav-item">About us</a>
          <a href="service.html" class="nav-item">Service</a>
        </div>
    </div>

    <section class="home-section" id="home-section">
        <div class="admin-section">
            <img class="profile-img" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSt08ADSBsRRxQ2xzvxjADA0SCVuwEwY6gASg&s" alt="Admin Profile">
            <h2>Welcome Admin!</h2>
            <h3>Manage Room</h3>
            <div class="buttons">
                <button class="add-room" onclick="scrollToAddRoom()">Add room</button>
                <button class="view-booking" ondblclick="scrollToViewBooking()">View all Booking</button>
            </div>
        </div>
    </section>

    <!-- Add room section -->
    <section class="add-room-container" id="add-room-section" >
        <h2>Manage Room > Add room </h2><br>

        <div class="form-section">
            <div>
                <p> Building <i class="bi bi-building-add"></i>  </p>
                <select name="" id="building">
                    <option value="Building A">Building A</option>
                    <option value="Building B">Building B</option>
                    <option value="Building STEM">Building STEM</option>
                    <option value="Building D">Building D</option>
                    <option value="Building T">Building T</option>
                    <option value="Building C (IFL)">Building C (IFL)</option>
                    <option value="Building G (IFL)">Building G (IFL)</option>
                    <option value="Building E (IFL)">Building E (IFL)</option>
                </select>
            </div>
            
            <div>
                <p>Room</p>
                <select name="" id="room">
                    <option value="Room 101">Room 101</option>
                    <option value="Room 301">Room 301</option>
                    <option value="Room 306">Room 306</option>
                    <option value="Room 302">Room 302</option>
                </select>
            </div>

            <div>
                <p>Capacity <i class="bi bi-database-up"></i></p>
                <input type="number" id="capacity" placeholder="Capacity">
            </div>

            <div>
                <!-- Add button with message -->
                <button class="click-btn add-btn" onclick="addRoom(this)" data-message="Room added successfully!">Add</button>

                <!-- Cancel button -->
                <button class="cancel-btn" onclick="showMessage(this)" data-message="Action cancelled.">Cancel</button>
            </div>
        </div>

        <br><br>

        <h3>All Room</h3>
        <div class="room-list" id="roomList">

            <!-- Confirmation Modal -->
            <div id="confirmModal" class="modal">
            <div class="modal-content">
                <p>Are you sure you want to delete this room?</p>
                <div class="modal-buttons">
                <button onclick="confirmDelete()">Yes</button>
                <button onclick="closeModal()">Cancel</button>
                </div>
            </div>
            </div>

            <div class="room-item">
                <span>Building A, Room 302, Capacity: Max 40</span>
                <button class="delete-btn" onclick="showDeleteModal(this)">Delete <i class="bi bi-trash"></i></button>

            </div>
            <div class="room-item">
                <span>Building A, Room 302, Capacity: Max 40</span>
                <button class="delete-btn" onclick="showDeleteModal(this)">Delete <i class="bi bi-trash"></i></button>

            </div>
            

        </div>

        <!-- Confirm and Cancel at the bottom -->
        <div class="bottom-buttom">
            <button class="confirm-btn" onclick="showMessage(this)" data-message="All rooms confirmed!">Confirm</button>
            <button class="cancel-btn" onclick="scrollToHome()">Cancel</button>
        </div>
    </section>

    <!-- view all booking sections -->
    <section class="view-booking-container" id="view-booking-section">
        <h2>Manage Room > View All Booking </h2><br><br>

        <h4>View All Booking</h4>
        <div class="room-list" id="roomList">
            
            <div class="room-item">
                <span>Building A, Room 302, Time: 8:00am - 12:00pm</span>
                <div>
                    <button class="Username">@Username</button>
                    <button class="contact">Contact</button>
                </div>
            </div>
            <div class="room-item">
                <span>Building A, Room 302, Time: 8:00am - 12:00pm</span>
                <div>
                    <button class="Username">@Username</button>
                    <button class="contact">Contact</button>
                </div>
            </div><div class="room-item">
                <span>Building A, Room 302, Time: 8:00am - 12:00pm</span>
                <div>
                    <button class="Username">@Username</button>
                    <button class="contact">Contact</button>
                </div>
            </div>
            <div class="room-item">
                <span>Building A, Room 302, Time: 8:00am - 12:00pm</span>
                <div>
                    <button class="Username">@Username</button>
                    <button class="contact">Contact</button>
                </div>
            </div><div class="room-item">
                <span>Building A, Room 302, Time: 8:00am - 12:00pm</span>
                <div>
                    <button class="Username">@Username</button>
                    <button class="contact">Contact</button>
                </div>
            </div>
             
        </div>

        <div class="bottom-buttom">
            <button class="cancel-btn" onclick="scrollToHome()">Cancel</button>
        </div>
    </section>

    <!-- Shared message display -->
    <div class="message" id="successMsg"></div>

    <!-- ------------------ Script JS ----------- -->
    
    <script>
        function scrollToAddRoom() {
            document.getElementById('add-room-section').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToViewBooking() {
            document.getElementById('view-booking-section').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToHome() {
            document.getElementById('home-section').scrollIntoView({ behavior: 'smooth' });
        }

        <!-- --------------- Show message ---------------- -->
        function showMessage(element) {
            const msg = element.getAttribute('data-message');
            const display = document.getElementById('successMsg');
            display.textContent = msg;
            display.style.display = 'block';

            // Hide after 3 seconds
            setTimeout(() => {
                display.style.display = 'none';
            }, 3000);
        }

        function addRoom(element) {
            const building = document.getElementById('building').value;
            const room = document.getElementById('room').value;
            const capacity = document.getElementById('capacity').value;

            if (!capacity || capacity <= 0) {
                alert("Please enter a valid capacity");
                return;
            }

            const roomList = document.getElementById('roomList');
            const div = document.createElement('div');
            div.className = 'room-item';
            div.innerHTML = `
                <span>${building}, ${room}, Capacity: Max ${capacity}</span>
                <button class="delete-button" onclick="deleteRoom(this)" data-message="Room deleted.">Delete</button>
            `;
            roomList.appendChild(div);

            document.getElementById('capacity').value = '';

            showMessage(element); // Show success message
        }

        function deleteRoom(element) {
            const roomItem = element.closest('.room-item');
            if (roomItem) roomItem.remove();
            showMessage(element); // Show delete message
        }

        // confrimation message
        let roomToDelete = null;

        function showDeleteModal(element) {
            roomToDelete = element;
            document.getElementById('confirmModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('confirmModal').style.display = 'none';
            roomToDelete = null;
        }

        function confirmDelete() {
            if (roomToDelete) {
                roomToDelete.parentElement.remove();
                showMessageText("Room deleted successfully!");
            }
            closeModal();
        }

        function showMessageText(msg) {
            const display = document.getElementById('successMsg');
            display.textContent = msg;
            display.style.display = 'block';
            setTimeout(() => display.style.display = 'none', 3000);
        }

    </script>

</body>
</html>